"use strict";var vm=new Vue({el:"#home",data:function(){return{cloak:!0,orderListName:"doing",agendaName:"agenda",totalDeviceCount:0,memberCount:0,balance:"￥0.00",isHover:!1,activeClass:"animated slideInLeft",leaveClass:"animated slideOutRight",agendaLabel:"我的待办",chartsData:[],oldVal:[],moduleBox:[{icon:"iconfont icon-xinjianfuwudingdan",label:"新建服务订单",bg:"rgba(255, 198, 75, 0.90)",href:"/shop/serviceOrder/create",hover:"rotateY(0deg)"},{icon:"iconfont icon-fuwudingdan",label:"新建租赁订单",bg:"rgba(50, 168, 238, 0.75)",href:"/shop/serviceOrder/create",hover:"rotateY(0deg)"},{icon:"iconfont icon-dingdanchaxun",label:"订单查询",bg:"#00dacc",href:"/shop/serviceOrder",hover:"rotateY(0deg)"},{icon:"iconfont icon-fuwushangguanli",label:"服务商管理",bg:"rgba(227, 69, 81, 0.7)",href:"/shop/vendor",hover:"rotateY(0deg)"}],deviceBox:[{icon:"iconfont icon-zaixian",title:"租赁设备",value:0},{icon:"iconfont icon-zaixian",title:"在线设备",value:0},{icon:"iconfont icon-tingzhi",title:"异常设备",value:0}],deviceBox2:[{icon:"iconfont icon-chengshifugai",title:"城市覆盖",value:0},{icon:"iconfont icon-qianyuefuwushang",title:"签约服务商",value:0},{icon:"iconfont icon-fuwudingdan",title:"服务订单",value:0}],deviceBox3:[{icon:"iconfont icon-yajinzonge",title:"押金总额",value:"￥0.00"},{icon:"iconfont icon-yuchongzhiyajin",title:"预充值押金",value:"￥0.00"},{icon:"iconfont icon-keyongyue",title:"可用余额",value:"￥0.00"}],orderList:[{label:"执行中订单",name:"doing"},{label:"最新订单",name:"newest"}],doingData:[],newestData:[],agendaTab:[{prop:"processFormEntityType",label:"待办类型",width:""},{prop:"subject",label:"标题",width:""}],agendaData:[],helpLogo:[{icon:"iconfont icon-xingshourumen",label:"新手入门",href:"http://www.xohaa.net/help/content/details/Ljloz9/mjyWgB?pageCode=help"},{icon:"iconfont icon-lianxiwomen",label:"联系我们",href:"http://www.xohaa.net/help/content/details/k6rAjm/Ljloz9?pageCode=faq="}]}},created:function(){this.fetchData()},mounted:function(){var e=this;this.$nextTick(function(){e.deviceNums(),e.scroll()})},methods:{fetchData:function(){var e=this,a=this;axios("/api/v1/home").then(function(t){if(a.chartsData=t.data.data.deviceActiveDatas,t.data.data.totalDeviceCount>0){var o=setInterval(function(){e.totalDeviceCount=Math.floor(Math.random()*Math.pow(10,t.data.data.totalDeviceCount.toString().length))},10);setTimeout(function(){clearInterval(o),e.totalDeviceCount=t.data.data.totalDeviceCount},1e3)}else e.totalDeviceCount=t.data.data.totalDeviceCount;if(t.data.data.memberCount>0){var n=setInterval(function(){e.memberCount=Math.floor(Math.random()*Math.pow(10,t.data.data.memberCount.toString().length))},10);setTimeout(function(){clearInterval(n),e.memberCount=t.data.data.memberCount},1e3)}else e.memberCount=t.data.data.memberCount;if(t.data.data.leaseDeviceCount>0){var i=setInterval(function(){e.deviceBox[0].value=Math.floor(Math.random()*Math.pow(10,t.data.data.leaseDeviceCount.toString().length))},10);setTimeout(function(){clearInterval(i),e.deviceBox[0].value=t.data.data.leaseDeviceCount},1e3)}else e.deviceBox[0].value=t.data.data.leaseDeviceCount;if(t.data.data.onlineDeviceCount>0){var l=setInterval(function(){e.deviceBox[1].value=Math.floor(Math.random()*Math.pow(10,t.data.data.onlineDeviceCount.toString().length))},10);setTimeout(function(){clearInterval(l),e.deviceBox[1].value=t.data.data.onlineDeviceCount},1e3)}else e.deviceBox[1].value=t.data.data.onlineDeviceCount;if(t.data.data.errorDeviceCount>0){var r=setInterval(function(){e.deviceBox[2].value=Math.floor(Math.random()*Math.pow(10,t.data.data.errorDeviceCount.toString().length))},10);setTimeout(function(){clearInterval(r),e.deviceBox[2].value=t.data.data.errorDeviceCount},1e3)}else e.deviceBox[2].value=t.data.data.errorDeviceCount;if(t.data.data.cityCount>0){var d=setInterval(function(){e.deviceBox2[0].value=Math.floor(Math.random()*Math.pow(10,t.data.data.cityCount.toString().length))},10);setTimeout(function(){clearInterval(d),e.deviceBox2[0].value=t.data.data.cityCount},1e3)}else e.deviceBox2[0].value=t.data.data.cityCount;if(t.data.data.vendorCount>0){var c=setInterval(function(){e.deviceBox2[1].value=Math.floor(Math.random()*Math.pow(10,t.data.data.vendorCount.toString().length))},10);setTimeout(function(){clearInterval(c),e.deviceBox2[1].value=t.data.data.vendorCount},1e3)}else e.deviceBox2[1].value=t.data.data.vendorCount;if(t.data.data.availableBalance>0){var s=setInterval(function(){e.deviceBox3[2].value=Math.floor(Math.random()*Math.pow(10,t.data.data.availableBalance.toString().length)).formatMoney()},10);setTimeout(function(){clearInterval(s),e.deviceBox3[2].value=t.data.data.availableBalance.formatMoney()},1e3)}else e.deviceBox3[2].value=t.data.data.availableBalance;if(t.data.data.totalDeposit>0){var v=setInterval(function(){e.deviceBox3[0].value=Math.floor(Math.random()*Math.pow(10,t.data.data.totalDeposit.toString().length)).formatMoney()},10);setTimeout(function(){clearInterval(v),e.deviceBox3[0].value=t.data.data.totalDeposit.formatMoney()},1e3)}else e.deviceBox3[0].value=t.data.data.totalDeposit;if(t.data.data.rentalBalance>0){var u=setInterval(function(){e.deviceBox3[1].value=Math.floor(Math.random()*Math.pow(10,t.data.data.rentalBalance.toString().length)).formatMoney()},10);setTimeout(function(){clearInterval(u),e.deviceBox3[1].value=t.data.data.rentalBalance.formatMoney()},1e3)}else e.deviceBox3[1].value=t.data.data.rentalBalance;if(t.data.data.serviceOrderCount>0){var h=setInterval(function(){e.deviceBox2[2].value=Math.floor(Math.random()*Math.pow(10,t.data.data.serviceOrderCount.toString().length))},10);setTimeout(function(){clearInterval(h),e.deviceBox2[2].value=t.data.data.serviceOrderCount},1e3)}else e.deviceBox2[2].value=t.data.data.serviceOrderCount;if(t.data.data.balance>0){var f=setInterval(function(){e.balance=Math.floor(Math.random()*Math.pow(10,t.data.data.balance.toString().length)).formatMoney()},10);setTimeout(function(){clearInterval(f),e.balance=t.data.data.balance.formatMoney()},1e3)}else e.balance=t.data.data.balance}).catch(function(e){console.log(e)}),axios.get("/api/v1/serviceOrders/processing").then(function(e){a.doingData=e.data.data.fileList,a.orderList[0].label="执行中订单（"+e.data.data.fileList.length+"）"}).catch(function(e){console.log(e)}),axios.get("/api/v1/serviceOrders/newest").then(function(e){a.newestData=e.data.data.fileList,a.orderList[1].label="最新订单（"+e.data.data.fileList.length+"）"}).catch(function(e){console.log(e)}),axios.get("/api/v1/workflow/instances/myTodoList").then(function(e){a.agendaData=e.data.data.fileList,a.agendaLabel="我的待办（"+e.data.data.fileList.length+"）"}).catch(function(e){console.log(e)})},deviceNums:function(){$(function(){var e=null;$("#device-nums").highcharts({chart:{type:"line",events:{load:function(a){var t=[],o=[],n=[];vm.chartsData.forEach(function(e,a,i){t.push(moment(i[a][0]).format("dddd")),o.push(i[a][1]),n.push(i[a][2])});var i=e.xAxis[0],l=e.series[0],r=e.series[1];i.update({categories:t}),l.update({data:o}),r.update({data:n})}}},title:{text:""},xAxis:{categories:[],tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{title:{text:""},labels:{formatter:function(){return this.value}},tickPixelInterval:"40"},tooltip:{split:!0,valueSuffix:"台"},credits:{text:""},series:[{name:"设备激活总数",data:[],color:"#49b949"},{name:"租赁设备激活总数",data:[],color:"#63a7ee"}],legend:{itemStyle:{color:"#757575",fontWeight:"normal"}}},function(a){e=a})})},doingClass:function(e,a){if(a%2==0)return"doingStripe"},doingID:function(e){var a=this;if(sessionStorage){sessionStorage.setItem("serviceID",a.doingData[e].id);var t=sessionStorage.getItem("serviceID");window.location.href="/shop/serviceOrder/"+t}},newestID:function(e){var a=this;if(sessionStorage){sessionStorage.setItem("serviceID",a.newestData[e].id);var t=sessionStorage.getItem("serviceID");window.location.href="/shop/serviceOrder/"+t}},agendaID:function(e){var a=this;sessionStorage&&sessionStorage.setItem("expenseId",a.agendaData[e].processInstanceId),window.location.href=a.agendaData[e].processFormUrl},scrollBar:function(e){$(e).stop().animate({marginTop:"-40px"},800,function(){$(this).css({marginTop:"0px"}).find("li:first").appendTo(this)})},scroll:function(){var e=this,a=setInterval(function(){e.scrollBar(".message-box-main")},2e3);$(".message-box-main").hover(function(){clearInterval(a)},function(){a=setInterval(function(){vm.scrollBar(".message-box-main")},2e3)})},boxEnter:function(e){"rotateY(0deg)"===this.moduleBox[e].hover?this.moduleBox[e].hover="rotateY(360deg)":this.moduleBox[e].hover="rotateY(0deg)"},boxLeave:function(e){"rotateY(0deg)"===this.moduleBox[e].hover?this.moduleBox[e].hover="rotateY(0deg)":this.moduleBox[e].hover="rotateY(360deg)"}},watch:{orderListName:function(e,a){var t=this;screen.width<769?(t.activeClass="",t.leaveClass=""):"doing"===e?(t.activeClass="animated slideInLeft",t.leaveClass="animated slideOutRight"):"newest"===e&&(t.activeClass="animated slideInRight",t.leaveClass="animated slideOutLeft")}}});