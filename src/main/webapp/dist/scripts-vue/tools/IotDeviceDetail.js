"use strict";var vm=new Vue({el:"#IotDeviceDetail",data:function(){return{cloak:!0,back:!1,searchInput:"",onoff:!1,searchResult:"",searchResults:[],searchDetailDia:!1,IotDeviceDetailSearch:!0,IotDeviceDetail:!1,IotDeviceDetails:[{key:"测试模式",value:""},{key:"是否已删除",value:""},{key:"Mac地址",value:""},{key:"设备编号",value:""},{key:"远程地址",value:""},{key:"是否已锁定",value:""},{key:"是否在线",value:""},{key:"设备异常",value:""},{key:"激活日期",value:""},{key:"租赁到期日",value:""},{key:"首次到达时间",value:""},{key:"最后到达时间",value:""},{key:"开关状态",value:""},{key:"水位状态",value:""},{key:"水泵状态",value:""},{key:"冲洗状态",value:""},{key:"出水阀状态",value:""},{key:"进水阀状态",value:""},{key:"高压开关状态",value:""},{key:"低压开关状态",value:""},{key:"水温值",value:""},{key:"原水TDS",value:""},{key:"总处理水量",value:""},{key:"出水TDS值",value:""},{key:"总出水量",value:""},{key:"上一阶段总出水量(ml)",value:""}],IotDeviceParts:{num:"配件编号",created:"安装日期",total:"总处理水量(ml)",percent:"可用百分比"},IotDevicePart:[]}},methods:{getResult:function(e){var a=this;e.length>=3&&axios.get("/api/v1/admin/iot/devices",{params:{searchPhrase:e,online:a.onoff}}).then(function(e){a.searchResults=e.data.data}).catch(function(e){console.log(e)})},getSearchResult:function(e){var a=this;e=e.replace(/\(.*?\)/,""),sessionStorage&&sessionStorage.setItem("deviceMac",e);var t=sessionStorage.getItem("deviceMac");""===a.searchResult?a.searchDetailDia=!0:(a.IotDeviceDetailSearch=!1,a.IotDeviceDetail=!0,a.back=!0,axios.get("/api/v1/admin/iot/devices/"+t).then(function(e){switch(a.IotDeviceDetails[2].value=e.data.data.deviceMac,a.IotDeviceDetails[3].value=parseInt(e.data.data.deviceId,16),a.IotDeviceDetails[20].value=e.data.data.waterTemperature,a.IotDeviceDetails[21].value=e.data.data.inWaterTds,a.IotDeviceDetails[22].value=e.data.data.inWaterTotalFlow,a.IotDeviceDetails[23].value=e.data.data.outWaterTds,a.IotDeviceDetails[24].value=e.data.data.outWaterTotalFlow,a.IotDeviceDetails[25].value=e.data.data.outWaterPreFlow,a.IotDevicePart=e.data.data.parts,!1===e.data.data.testMode?a.IotDeviceDetails[0].value="否":a.IotDeviceDetails[0].value="是",!1===e.data.data.deleted?a.IotDeviceDetails[1].value="否":a.IotDeviceDetails[1].value="是",null===e.data.data.remoteIp||null===e.data.data.remotePort?a.IotDeviceDetails[4].value="无":a.IotDeviceDetails[4].value=e.data.data.remoteIp+":"+e.data.data.remotePort,!1===e.data.data.locked?a.IotDeviceDetails[5].value="否":a.IotDeviceDetails[5].value="是",!1===e.data.data.online?a.IotDeviceDetails[6].value="否":a.IotDeviceDetails[6].value="是",e.data.data.exceptionCode){case 0:a.IotDeviceDetails[7].value="0:无异常";break;case 1:a.IotDeviceDetails[7].value="1:无水";break;case 2:a.IotDeviceDetails[7].value="2:漏水";break;case 3:a.IotDeviceDetails[7].value="3:传感器异常"}switch(0===e.data.data.activedAt||""===e.data.data.activedAt||null===e.data.data.activedAt?a.IotDeviceDetails[8].value="(未知)":a.IotDeviceDetails[8].value=e.data.data.activedAt,0===e.data.data.leaseDueDate||""===e.data.data.leaseDueDate||null===e.data.data.leaseDueDate?a.IotDeviceDetails[9].value="(未知)":a.IotDeviceDetails[9].value=new Date(e.data.data.leaseDueDate).Format("yyyy-MM-dd"),0===e.data.data.firstTouchTime||""===e.data.data.firstTouchTime||null===e.data.data.firstTouchTime?a.IotDeviceDetails[10].value="(未知)":a.IotDeviceDetails[10].value=new Date(e.data.data.firstTouchTime).Format("yyyy-MM-dd hh:mm:ss"),0===e.data.data.lastTouchTime||""===e.data.data.lastTouchTime||null===e.data.data.lastTouchTime?a.IotDeviceDetails[11].value="(未知)":a.IotDeviceDetails[11].value=new Date(e.data.data.lastTouchTime).Format("yyyy-MM-dd hh:mm:ss"),!1===e.data.data.powerOn?a.IotDeviceDetails[12].value="关机":a.IotDeviceDetails[12].value="开机",e.data.data.waterLevel){case 0:a.IotDeviceDetails[13].value="水满";break;case 1:a.IotDeviceDetails[13].value="无水"}switch(e.data.data.waterPump){case 0:a.IotDeviceDetails[14].value="停止";break;case 1:a.IotDeviceDetails[14].value="运行中"}switch(e.data.data.waterFlush){case 0:a.IotDeviceDetails[15].value="停止";break;case 1:a.IotDeviceDetails[15].value="冲洗中"}switch(e.data.data.outValve){case 0:a.IotDeviceDetails[16].value="停止";break;case 1:a.IotDeviceDetails[16].value="运行中"}switch(e.data.data.inValve){case 0:a.IotDeviceDetails[17].value="停止";break;case 1:a.IotDeviceDetails[17].value="运行中"}switch(e.data.data.highVoltageSwitch){case 0:a.IotDeviceDetails[18].value="关闭";break;case 1:a.IotDeviceDetails[18].value="开启"}switch(e.data.data.lowVoltageSwitch){case 0:a.IotDeviceDetails[19].value="关闭";break;case 1:a.IotDeviceDetails[19].value="开启"}a.IotDevicePart.forEach(function(e,a,t){t[a].installedAt=new Date(t[a].installedAt).Format("yyyy-MM-dd"),t[a].availablePercentage=t[a].availablePercentage+"%"})}).catch(function(e){console.log(e)}))},getOnoff:function(){var e=this;if(console.log(""===e.searchInput),""===e.searchInput)return!1;axios.get("/api/v1/admin/iot/devices",{params:{searchPhrase:e.searchInput,online:e.onoff}}).then(function(a){e.searchResults=a.data.data}).catch(function(e){console.log(e)})},goback:function(){var e=this;e.IotDeviceDetailSearch=!0,e.IotDeviceDetail=!1,e.back=!1,e.searchInput="",e.searchResults="",e.onoff=!1,e.searchResult=""}}});