var ProductSelector=function(t){function e(t){var e="选择产品信息";"PJ"===u&&(e="选择配件"),new Dlg({id:"selectProductDlg",title:e,url:n+"/selectProducts",width:800,height:500,onLoaded:function(){o()},onOk:function(){if(null===c||0===c.length)return void toast("请选择产品信息","error");t.call(this,c),this.close()}})}function o(){r=new BootGrid({id:"product4selectGrid",url:"/shop/product",data:{productType:u},selection:!0,multiSelect:i,rowSelect:!0,rowCount:10,formatters:{productTypeFormatter:function(t,e){return"CP"===e.productType?"I"===e.deviceType?"智能设备":"普通产品":e.productTypeTitle}},onSelected:function(t){-1===_.findIndex(c,function(e){return e.id===t[0].id})&&c.push(t[0])},onDeSelected:function(t){_.remove(c,function(e){return e.id===t[0].id})}})}var n="/shop/product",r=null,c=[],u="CP",i=!1;return{selectProduct:function(t){e(t)},selectProducts:function(t){i=!0,e(t)},selectPart:function(t){u="PJ",e(t)},selectParts:function(t){u="PJ",i=!0,e(t)}}}(jQuery);